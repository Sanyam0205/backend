# README

## Overview

This script performs multiple tasks related to research papers. It extracts sections from PDFs, uses OpenAI models to identify research subjects, research areas, and authors, generates summaries, and creates social media posts focusing on the outcomes of the research. Each task is organized into a separate class, leveraging OpenAI's API for natural language processing tasks.

## Prerequisites

- Python 3.x
- Required libraries: `pydantic`, `fitz` (PyMuPDF), `openai`, `dotenv`

You can install the required libraries using:

```bash
pip install pydantic pymupdf openai python-dotenv
```

Ensure you have an OpenAI API key and that it's stored in a `.env` file as `OPENAI_API_KEY`.

---

## Class-wise Explanation

### 1. **`Identifier` Class**
**Purpose**: 
A Pydantic model used to structure the research paper's metadata, specifically the `publication_name`, `research_subject`, and `research_area`.

**Attributes**:
- `publication_name` (str): Name of the research paper.
- `research_subject` (str): Subject of the research.
- `research_area` (str): Research area related to the paper.

---

### 2. **`ResearchIdentifier` Class**

**Purpose**:
This class uses OpenAI to identify the research subject and research field from a given publication title and summary.

**Functions**:
- `__init__()`: Initializes the OpenAI client using the API key.
- `identify_research(title: str, summary: str) -> dict`: Uses OpenAI to analyze the publication title and summary to return the research subject and research area.

**Inputs**:
- `title` (str): The title of the research publication.
- `summary` (str): A brief summary of the research paper.

**Outputs**:
- Returns a JSON object containing the research subject and research area.

---

### 3. **`TopFieldsResponse` Class**
**Purpose**:
A Pydantic model for structuring the response from OpenAI, identifying the top 5 research fields from a list of publications.

**Attributes**:
- `top_5_research_fields` (str): A string containing the top research fields.

---

### 4. **`Topfields` Class**

**Purpose**:
Identifies the top 5 research fields from a list of publications using OpenAI.

**Functions**:
- `__init__()`: Initializes the OpenAI client using the API key.
- `identify_research_fields(publication_mappings: list, limit: int) -> dict`: Analyzes a list of publications and retrieves the top 5 research fields.

**Inputs**:
- `publication_mappings` (list): List of publications, each containing `title`, `research_subject`, and `research_area`.
- `limit` (int): Number of publications to analyze (limit the number of publications processed).

**Outputs**:
- Returns a JSON object containing the top 5 research fields.

---

### 5. **`Authors` Class**
**Purpose**:
A Pydantic model used to structure the response containing the authors of a research paper.

**Attributes**:
- `authors` (list): List of authors.

---

### 6. **`GetAuthors` Class**

**Purpose**:
Retrieves the list of authors from the research paper's summary using OpenAI.

**Functions**:
- `__init__()`: Initializes the OpenAI client using the API key.
- `findauthors(summary: str) -> list`: Extracts a list of authors from the research paper's summary.

**Inputs**:
- `summary` (str): The summary of the research paper.

**Outputs**:
- Returns a list of authors in JSON format.

---

### 7. **`Summary` Class**
**Purpose**:
A Pydantic model used to structure the response containing the generated summary.

**Attributes**:
- `summary` (str): The summary generated by OpenAI.

---

### 8. **`OpenAISummary` Class**

**Purpose**:
Generates a detailed summary of a research paper using OpenAI.

**Functions**:
- `__init__()`: Initializes the OpenAI client using the API key.
- `generate_summary(scraper_summary: str) -> str`: Generates a detailed summary from the scraped text of the research paper.

**Inputs**:
- `scraper_summary` (str): The text to be summarized.

**Outputs**:
- Returns the summary as a string.

---

### 9. **`PostGeneration` Class**

**Purpose**:
Extracts sections of a research paper from a PDF and generates a social media post using OpenAI based on the research's abstract, outcomes, conclusions, and future work.

**Functions**:
- `__init__(pdf_path: str)`: Takes the path of the research paper's PDF as input.
- `extract_pdf_sections() -> tuple`: Extracts the `abstract`, `outcomes`, `conclusion`, and `future_work` from the PDF.
- `generate_social_media_post(abstract, outcomes, conclusion, future_work, content) -> str`: Generates a social media post using OpenAI.
- `runner() -> str`: Runs the process end-to-end by extracting sections from the PDF and generating the social media post.

**Inputs**:
- `pdf_path` (str): Path to the research paper's PDF.

**Outputs**:
- Returns a string containing the generated social media post.

---

## Error Handling

The script has basic error handling mechanisms. Below is a table of potential errors, their causes, and solutions:

| Error                          | Cause                                                                 | Solution                                                                                         |
|---------------------------------|-----------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| `KeyError` in `findauthors()`   | The key `'message'` or `'choices'` is missing in the OpenAI response  | Ensure that the OpenAI response format matches expectations, and add fallback logic for failures. |
| `ValidationError` in Pydantic   | The response format does not match the Pydantic model                 | Check the response structure and ensure that the Pydantic model accurately reflects the response. |
| `IndexError` in `generate_summary()` | OpenAI response does not have enough elements in the choices array     | Ensure the model is configured correctly and check if responses are too short or incomplete.      |
| `FileNotFoundError` in `PostGeneration` | The provided PDF file path is incorrect or the file doesn't exist         | Verify the PDF file path and ensure the file exists before running the script.                   |
| `Error processing OpenAI response` | Issue with parsing or extracting content from the OpenAI response   | Retry the request or adjust the model prompts for more reliable results.                         |

---

## Environment Variables

Ensure that the `.env` file contains the following:

```
OPENAI_API_KEY=your_openai_api_key_here
```

---

## Example Usage

### Extracting Research Subjects and Areas:
```python
research_identifier = ResearchIdentifier()
metadata = research_identifier.identify_research(title="Sample Paper", summary="This paper discusses...")
print(metadata)
```

### Extracting Authors:
```python
authors_finder = GetAuthors()
authors_list = authors_finder.findauthors(summary="This paper is authored by...")
print(authors_list)
```

### Generating Summary:
```python
summary_generator = OpenAISummary()
summary = summary_generator.generate_summary(scraper_summary="This paper covers...")
print(summary)
```

### Generating Social Media Post:
```python
post_generator = PostGeneration(pdf_path="path/to/paper.pdf")
post = post_generator.runner()
print(post)
```

---